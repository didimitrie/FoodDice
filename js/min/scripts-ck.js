function randomString(){for(var o="",t="Zabcdefghi  jklmnopqrstuvwxyz ",e=0;8>e;e++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}function getRandomColor(){for(var o="0123456789ABCDEF".split(""),t="#",e=0;6>e;e++)t+=o[Math.floor(16*Math.random())];return t}Number.prototype.map=function(o,t,e,n){return(this-o)*(n-e)/(t-o)+e},function(){var o=1;$.fn.bringToTop=function(){this.css("z-index",++o)}}(),$(document).ready(function(){var o=$("body").height();console.log(o),$(".dice").each(function(t){$(this).height((o-0)/5),$(this).css("top",t*o/5)}),$(".dice").each(function(){$(this).css("background-color",getRandomColor())});var t=!0,e=!1,n=null,i=!1,c=!1,a=!1,r=!1,l=0;$("body").hammer().on("pinchin",function(o){if(a=!0,t){$(".dice").each(function(o){$(this).css("z-index",o)});var e=l=o.gesture.scale,n=$("body").height()/2,i=n-n/5;console.log("Pinch scale: "+e),$(".dice").each(function(o){$(this).velocity({top:i+10*o},{duration:400,easing:"easeInOutBack",complete:function(){t=!1}})})}}).on("release",function(){a&&l>.6&&(console.log("pinch released! "),$(".dice").velocity("stop",!0),$(".dice").each(function(o){$(this).velocity({left:0,width:"100%",borderRadius:0,top:$("body").height()/5*o,scale:1},{complete:function(){a=!1},duration:200})}))}),$("body").hammer().on("pinchout",function(o){$(".dice").velocity("stop",!0),$(".dice").each(function(o){$(this).velocity({left:0,width:"100%",borderRadius:0,top:$("body").height()/5*o,scale:1},{complete:function(){a=!1},duration:200})})}),$("body").hammer().on("dragdown",function(o){i||c||(console.log("Start drag"),o.gesture.preventDefault(!0),e=!0,1==t&&(t=!1,$(".dice").velocity({scale:.8},{duration:900,easing:[600,20]})))}).on("dragend",function(o){a||i||c||a||(console.log("Stop drag"),t=!0,e=!1,$(".dice").velocity("stop",!0),$(".dice").velocity({scale:1,translateX:0,translateY:0},{easing:[600,20]}),$(".dice").each(function(){$(this).css("background-color",getRandomColor()),$(this).find(".container").html(randomString())}))}),$(".dice").hammer().on("touch",function(o){if(!a){o.gesture.preventDefault(!0);var t=$(this);$(this).bringToTop(),setTimeout(function(){e||(console.log("touchy > "+$(t).html()),c=!0,$(t).velocity({boxShadowBlur:50,scale:1.1},{duration:100}))},200)}}),$(".dice").hammer().on("hold",function(o){i=!0,$(this).find(".container").velocity("transition.bounceRightOut",300).velocity("transition.bounceLeftIn",300),$(this).find(".container").html(randomString())}),$(".dice").hammer().on("release",function(o){if(!a){var t=$(this);setTimeout(function(){a||e&&a||(i&&(i=!1,console.log("released element"),$(t).css("background-color",getRandomColor())),c&&(console.log("released element from touch"),c=!1,$(t).velocity("stop",!0),$(t).velocity({boxShadowBlur:0,scale:1},{duration:300})))},200)}})});